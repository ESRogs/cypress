<% content_for :head do %>
  <script type="text/javascript">
    function toggleMeasures(toggleSetting, group) {
      if (arguments.length < 2) {
        $('#testMeasures input:checkbox').prop('checked', toggleSetting);
      } else {
        selector = '#testMeasures input:checkbox.' + group;
        $(selector).prop('checked', toggleSetting);
      }
    }
  </script>
  
  <%= stylesheet_link_tag "button.css" %>
<% end %>

<% submit_method = :post if action_name == "new"
submit_method = :put if action_name == "edit" %>
<%= form_for(@vendor, :html => { :method => submit_method, :multipart => true }) do |f| %>
  <h1>Vendor Information</h1>
      <section id="vendorInfo">
        <dl>
          <dt>Vendor Name:</dt>
          <dd><%= f.text_field :name, :size=>"20", :class=>"req" %></dd>
          <dt>Url:</dt>
          <dd><%= f.text_field :url, :size=>"20", :class=>"req" %></dd>
          <dt>Address:</dt>
          <dd><%= f.text_field :address, :size=>"20", :class=>"req" %></dd>
          <dt>State:</dt>
          <dd><%= f.text_field :state, :size=>"20", :class=>"req" %></dd>
          <dt>ZIP:</dt>
          <dd><%= f.text_field :zip, :size=>"20", :class=>"req" %></dd>
        </dl>
        <dl>
          <dt class="foo">EHR POC:</dt>
          <dd><%= f.text_field :poc, :size=>"20", :class=>"req" %></dd>
          <dt>Email:</dt>
          <dd><%= f.text_field :email, :size=>"20", :class=>"req" %></dd>
          <dt>Phone:</dt>
          <dd><%= f.text_field :tel, :size=>"20", :class=>"req" %></dd>
          <dt>Fax:</dt>
          <dd><%= f.text_field :fax, :size=>"20", :class=>"req" %></dd>
        </dl>
        <dl>
          <dt>Proctor:</dt>
          <dd><%= f.text_field :proctor, :size=>"20", :class=>"req" %></dd>
          <dt>Email:</dt>
          <dd><%= f.text_field :proctor_email, :size=>"20", :class=>"req" %></dd>
          <dt>Phone:</dt>
          <dd><%= f.text_field :proctor_tel, :size=>"20", :class=>"req" %></dd>
        </dl>
      </section>
      <h2>alternate POCs</h2>
        <section id="altPOC">
          <dl>
            <dt>Main EHR POC:</dt>
            <dd><%= f.text_field :accounts_poc, :size=>"20", :class=>"req" %></dd>
            <dt>Email:</dt>
            <dd><%= f.text_field :accounts_email, :size=>"20", :class=>"req" %></dd>
            <dt>Phone:</dt>
            <dd><%= f.text_field :accounts_tel, :size=>"20", :class=>"req" %></dd>
          </dl>
          <dl>
            <dt>Technical POC:</dt>
            <dd><%= f.text_field :tech_poc, :size=>"20", :class=>"req" %></dd>
            <dt>Email:</dt>
            <dd><%= f.text_field :tech_email, :size=>"20", :class=>"req" %></dd>
            <dt>Phone:</dt>
            <dd><%= f.text_field :tech_tel, :size=>"20", :class=>"req" %></dd>
          </dl>
          <dl>
            <dt>Press POC:</dt>
            <dd><%= f.text_field :press_poc, :size=>"20", :class=>"req" %></dd>
            <dt>Email:</dt>
            <dd><%= f.text_field :press_email, :size=>"20", :class=>"req" %></dd>
            <dt>Phone:</dt>
            <dd><%= f.text_field :press_tel, :size=>"20", :class=>"req" %></dd>
          </dl>
        </section>
        
      <h1>Profile Options</h1>
      <section id="testProfile">
        <dl>
          <dt>patients:</dt>
          <dd>
	          <%= f.radio_button :patient_population_id, "all", 
	            :checked=>(@vendor[:patient_population_id] == nil || @vendor[:patient_population_id] == "all") %>
            <%= f.label :patient_population_id_all, "all" %>
	          <%= f.radio_button :patient_population_id,"core20" %>
            <%= f.label :patient_population_id_core20, "20 core" %>
	        </dd>
	      </dl>
	      <dl>
          <dt>error threshold:</dt>
          <dd><select><option>0%</option></select></dd>
	      </dl>
	      <dl>
          <dt>patient test mode:</dt>
          <dd><select><option>name randomization</option></select></dd>
        </dl>
        
        <h2>Bring Your Own Data</h2>
        <dl>
          <dt><%= f.label :byod_label, "upload .zip of C32s:" %></dt>
          <dd><%= f.file_field :byod %></dd>
        </dl>
      </section>
      
      <h1>Test Measures <span class="header_commands">[<a href="javascript:void(0)" onclick="toggleMeasures('true')">check all</a> | <a href="javascript:void(0)" onclick="toggleMeasures(0);">uncheck all</a>]</span></h1> 
      <section id="testMeasures">
        <% @measures_categories.sort.each do |category, measures| %>
          <div>
            <dl>
              <dt><%= category %> <span class="header_commands">[<a href="javascript:void(0)" onclick="toggleMeasures('true','<%= category.tr(" '", "_") %>')">check all</a> | <a href="javascript:void(0)" onclick="toggleMeasures(0,'<%= category.tr(" '", "_") %>');">uncheck all</a>]</span></dt>
              <dd><%= f.collection_check_boxes :measure_ids, measures, :measure_id, :display_name, {}, {"class"=>category.tr(" '", "_")} %></dd>
            </dl>
          </div>
        <% end %>
      </section>
  
  <% submit_text = "Create Vendor" if action_name == "new"
  submit_text = "Save Vendor" if action_name == "edit" %>
  <a id="vendor_submit" class="cmd" onclick="$(this).parent().submit();"><%= submit_text %></a>
<% end %>

