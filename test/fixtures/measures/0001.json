{
  "_id" : "4fdb62e01d41c820f6000003",
  "endorser" : "NQF",
  "id" : "0001",
  "hqmf_id" : "0001",
  "name" : "Asthma Assessment",
  "bundle" : "4fdb62e01d41c820f6000001",
  "population_ids" : {"IPP" : "ipp_0001", "DENOM" : "denom_0001", "NUMER": "num_0001"},
  "properties" : [ 
    "NQF_Retooled_Measure_0001.xlsx.json" ],
  "description" : "Percentage of patients aged 5 through 40 years with a diagnosis of asthma and who have been seen for at least 2 office visits, who were evaluated during at least one office visit within 12 months for the frequency (numeric) of daytime and nocturnal asthma symptoms.",
  "category" : "Asthma",
  "steward" : "AMA",
  "parameters" : { "effective_date" : { "description" : "Effective end date for measure",
      "type" : "number",
      "format" : "utc-sec" } },
  "patient" : { "birthdate" : { "description" : "Date of birth",
      "critical" : true,
      "type" : "number",
      "format" : "utc-sec",
      "codes" : [ 
        { "set" : "HL7",
          "version" : "3.0",
          "values" : [ 
            "00110" ] } ] } },
  "population" : { "and" : [ 
      { "category" : "Patient Characteristic",
        "title" : "Age between 5 and 40" }, 
      { "category" : "Diagnosis",
        "title" : "Active Asthma" }, 
      { "category" : "Encounter",
        "title" : ">= 2 counts of office or outpatient consult" } ] },
  "denominator" : {},
  "numerator" : { "or" : [ 
      { "and" : [ 
          { "category" : "Symptom Assessed",
            "title" : "Asthma Daytime Symptoms" }, 
          { "category" : "Symptom Assessed",
            "title" : "Asthma Nighttime Symptoms" } ] }, 
      { "and" : [ 
          { "category" : "Symptom Assessed",
            "title" : "Asthma Daytime Symptoms Quantified" }, 
          { "category" : "Symptom Assessed",
            "title" : "Asthma Nighttime Symptoms Quantified" } ] }, 
      { "category" : "Risk Category/Assessment",
        "title" : "Asthma Symptom Assessment Tool" } ] },
  "exclusions" : {},
  "map_fn" : "function () {\n  var patient = this;\n  var measure = patient.measures[\"0001\"];\n  if (measure==null)\n    measure={};\n\n  <%= init_js_frameworks %>\n\n  var year = 365 * 24 * 60 * 60;\n  var effective_date =  <%= effective_date %>;\n  var earliest_birthdate =  effective_date - 40 * year;\n  var latest_birthdate =    effective_date - 5 * year;\n  var earliest_diagnosis =  effective_date - 2 * year;\n  var measurement_period_start = effective_date -1 * year;\n\n  var population = function() {\n    // the number of counts of office encounters and outpatient consults \n    // to determine the physician has a relationship with the patient\n    /*\n    \"Patient characteristic: birth date” using the “birth date code list” before the beginning\n    of the “measurement period”;\n    “Diagnosis active: asthma” using the “asthma code list grouping” before or\n    simultaneously to “Encounter: encounter office & outpatient consult”;\n    */\n    var encounter_after_asthma_diagnosis = actionFollowingSomething (measure.asthma_diagnosis_active, measure.encounter_office_outpatient_consult_encounter);  // **should this be constrained to measurement period**???\n\n    /*\n    “Encounter: encounter office & outpatient consult” using the “encounter office &\n    outpatient consult code list” during the “measurement period”;\n    */   \n    var encounters  = inRange( measure.encounter_office_outpatient_consult_encounter, \n                            measurement_period_start,\n                            effective_date);\n\n    return (inRange(patient.birthdate, earliest_birthdate, latest_birthdate) \n            && encounter_after_asthma_diagnosis\n            && encounters >= 2);\n  }\n  \n  var denominator = function() {\n    return population();\n  }\n\n  var numerator = function() {\n    /*\n    “Symptom assessed: asthma daytime symptoms quantified” using the “asthma daytime\n    symptoms quantified code list” before or simultaneously to “Encounter: encounter\n    office & outpatient consult”;\n    */\n    var daytime_symptoms_assessed_before_encounter = actionFollowingSomething(\n      measure.asthma_daytime_symptoms_quantified_symptom_assessed,\n      measure.encounter_office_outpatient_consult_encounter);\n    /*\n    “Symptom assessed: asthma nighttime symptoms quantified” using the “asthma\n    nighttime symptoms quantified code list” before or simultaneously to “Encounter:\n    encounter office & outpatient consult”;\n    */\n    var nighttime_symptoms_assessed_before_encounter = actionFollowingSomething(\n      measure.asthma_nighttime_symptoms_quantified_symptom_assessed,\n      measure.encounter_office_outpatient_consult_encounter);\n    /*\n    “Symptom active: asthma daytime symptoms” using the “asthma daytime symptoms\n    code list” before or simultaneously to “Encounter: encounter office & outpatient\n    consult”;\n    */\n    var daytime_symptoms_diagnosed_before_encounter = actionFollowingSomething (\n      measure.asthma_daytime_symptoms_diagnosis_active, \n      measure.encounter_office_outpatient_consult_encounter);\n    /*\n    “Symptom active: asthma nighttime symptoms” using the “asthma nighttime symptoms\n    code list” before or simultaneously to “Encounter: encounter office & outpatient\n    consult”;\n    */\n    var nighttime_symptoms_diagnosed_before_encounter = actionFollowingSomething(\n      measure.asthma_nighttime_symptoms_symptom_active,\n      measure.encounter_office_outpatient_consult_encounter);\n\n    /*\n    “Risk category /assessment: asthma symptom assessment tool” using the “asthma\n    symptom assessment tool code list” before or simultaneously to “Encounter: encounter\n    office & outpatient consult”;\n    */\n    var asthma_assessment_before_encounter = actionFollowingSomething(\n      measure.asthma_symptom_assessment_tool_risk_category_assessment,\n      measure.encounter_office_outpatient_consult_encounter);\n\n    return ( (daytime_symptoms_assessed_before_encounter && nighttime_symptoms_assessed_before_encounter) ||\n            (daytime_symptoms_diagnosed_before_encounter && nighttime_symptoms_diagnosed_before_encounter) ||\n            asthma_assessment_before_encounter);\n  }\n\n  var exclusion = function() {\n    return false;\n  }\n\n  map(patient, population, denominator, numerator, exclusion);\n};\n",
  "measure" : { "asthma_diagnosis_active" : { "standard_concept" : "asthma",
      "standard_category" : "diagnosis_condition_problem",
      "standard_concept_id" : "A_c362",
      "qds_data_type" : "diagnosis_active",
      "qds_id" : "A_1244",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "ICD-10-CM",
          "version" : "2010",
          "standard_concept" : "asthma",
          "standard_concept_id" : "A_c60",
          "qds_id" : "A_162",
          "values" : [ 
            "J45", 
            "J45.22", 
            "J45.32", 
            "J45.42", 
            "J45.52", 
            "J45.90", 
            "J45.901", 
            "J45.902", 
            "J45.990", 
            "J45.991" ] }, 
        { "set" : "ICD-9-CM",
          "version" : "2010",
          "standard_concept" : "asthma",
          "standard_concept_id" : "A_c59",
          "qds_id" : "A_161",
          "values" : [ 
            "493.00", 
            "493.01", 
            "493.02", 
            "493.10", 
            "493.11", 
            "493.12", 
            "493.20", 
            "493.21", 
            "493.22", 
            "493.81", 
            "493.82", 
            "493.90", 
            "493.91", 
            "493.92" ] }, 
        { "set" : "SNOMED-CT",
          "version" : "July 2009",
          "standard_concept" : "asthma",
          "standard_concept_id" : "A_c61",
          "qds_id" : "A_163",
          "values" : [ 
            "11641008", 
            "12428000", 
            "13151001", 
            "195949008", 
            "195967001", 
            "195977004", 
            "195979001", 
            "196013003", 
            "225057002", 
            "233672007", 
            "233678006", 
            "233679003", 
            "233681001", 
            "233683003", 
            "233685005", 
            "233688007", 
            "266361008", 
            "266364000", 
            "281239006", 
            "30352005", 
            "304527002", 
            "31387002", 
            "370218001", 
            "370219009", 
            "370220003", 
            "370221004", 
            "389145006", 
            "405944004", 
            "407674008", 
            "409663006", 
            "423889005", 
            "424199006", 
            "424643009", 
            "425969006", 
            "426656000", 
            "426979002", 
            "427295004", 
            "427354000", 
            "427603009", 
            "427679007", 
            "442025000", 
            "55570000", 
            "56968009", 
            "57546000", 
            "59327009", 
            "59786004", 
            "63088003", 
            "67415000", 
            "85761009", 
            "91340006", 
            "92807009", 
            "93432008" ] } ] },
    "asthma_daytime_symptoms_diagnosis_active" : { "standard_concept" : "asthma_daytime_symptoms",
      "standard_category" : "symptom",
      "standard_concept_id" : "A_c440",
      "qds_data_type" : "diagnosis_active",
      "qds_id" : "A_1441",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "SNOMED-CT",
          "version" : "07/2009",
          "standard_concept" : "asthma_daytime_symptoms",
          "standard_concept_id" : "A_c440",
          "qds_id" : "A_1441",
          "values" : [ 
            "370204008", 
            "373899003" ] } ] },
    "asthma_daytime_symptoms_quantified_symptom_assessed" : { "standard_concept" : "asthma_daytime_symptoms_quantified",
      "standard_category" : "symptom",
      "standard_concept_id" : "A_c141",
      "qds_data_type" : "symptom_assessed",
      "qds_id" : "A_366",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "SNOMED-CT",
          "version" : "July 2009",
          "standard_concept" : "asthma_daytime_symptoms_quantified",
          "standard_concept_id" : "A_c141",
          "qds_id" : "A_366",
          "values" : [ 
            "370202007", 
            "370203002", 
            "370208006" ] } ] },
    "asthma_nighttime_symptoms_symptom_active" : { "standard_concept" : "asthma_nighttime_symptoms",
      "standard_category" : "symptom",
      "standard_concept_id" : "A_c441",
      "qds_data_type" : "symptom_active",
      "qds_id" : "A_1442",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "SNOMED-CT",
          "version" : "07/2009",
          "standard_concept" : "asthma_nighttime_symptoms",
          "standard_concept_id" : "A_c441",
          "qds_id" : "A_1442",
          "values" : [ 
            "170631002", 
            "170632009", 
            "170633004", 
            "170634005", 
            "395022009" ] } ] },
    "asthma_nighttime_symptoms_quantified_symptom_assessed" : { "standard_concept" : "asthma_nighttime_symptoms_quantified",
      "standard_category" : "symptom",
      "standard_concept_id" : "A_c142",
      "qds_data_type" : "symptom_assessed",
      "qds_id" : "A_367",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "SNOMED-CT",
          "version" : "July 2009",
          "standard_concept" : "asthma_nighttime_symptoms_quantified",
          "standard_concept_id" : "A_c142",
          "qds_id" : "A_367",
          "values" : [ 
            "170635006", 
            "170636007", 
            "370205009" ] } ] },
    "asthma_symptom_assessment_tool_risk_category_assessment" : { "standard_concept" : "asthma_symptom_assessment_tool",
      "standard_category" : "risk_category_assessment",
      "standard_concept_id" : "A_c143",
      "qds_data_type" : "risk_category_assessment",
      "qds_id" : "A_368",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "SNOMED-CT",
          "version" : "July 2009",
          "standard_concept" : "asthma_symptom_assessment_tool",
          "standard_concept_id" : "A_c143",
          "qds_id" : "A_368",
          "values" : [ 
            "401011001" ] } ] },
    "encounter_office_outpatient_consult_encounter" : { "standard_concept" : "encounter_office_outpatient_consult",
      "standard_category" : "encounter",
      "standard_concept_id" : "A_c99",
      "qds_data_type" : "encounter",
      "qds_id" : "A_251",
      "type" : "array",
      "items" : { "type" : "number",
        "format" : "utc-sec" },
      "codes" : [ 
        { "set" : "CPT",
          "version" : "2010",
          "standard_concept" : "encounter_office_outpatient_consult",
          "standard_concept_id" : "A_c99",
          "qds_id" : "A_251",
          "values" : [ 
            "99201", 
            "99202", 
            "99203", 
            "99204", 
            "99205", 
            "99212", 
            "99213", 
            "99214", 
            "99215", 
            "99241", 
            "99242", 
            "99243", 
            "99244", 
            "99245" ] } ] } }
}